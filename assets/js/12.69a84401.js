(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{325:function(t,s,a){"use strict";a.r(s);var n=a(33),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"使用教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用教程"}},[t._v("#")]),t._v(" 使用教程")]),t._v(" "),a("h2",{attrs:{id:"登录后台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录后台"}},[t._v("#")]),t._v(" 登录后台")]),t._v(" "),a("p",[t._v("默认登录账号:"),a("code",[t._v("admin")]),t._v(",密码："),a("code",[t._v("jsyang666")])]),t._v(" "),a("blockquote",[a("p",[t._v("这两个写死在代码里了,可以在/jsyang-admin/app/controller/admins.js下的"),a("code",[t._v("adminLogin")]),t._v("函数去修改对应代码")])]),t._v(" "),a("h2",{attrs:{id:"创建没有生成代码和管理员管理菜单的用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建没有生成代码和管理员管理菜单的用户"}},[t._v("#")]),t._v(" 创建没有生成代码和管理员管理菜单的用户")]),t._v(" "),a("p",[t._v("点击管理员管理-新建-输入账号密码-确定\n"),a("a",{attrs:{"data-fancybox":"",title:"点击管理员管理-新建-输入账号密码",href:"/new-user.png"}},[a("img",{attrs:{src:"/new-user.png",alt:"点击管理员管理-新建-输入账号密码"}})]),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502123446.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502123446.png",alt:""}})])]),t._v(" "),a("h2",{attrs:{id:"生成最简单的curd-增删改查-界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成最简单的curd-增删改查-界面"}},[t._v("#")]),t._v(" 生成最简单的curd(增删改查)界面")]),t._v(" "),a("p",[t._v("假设我们现在要做有个学生统计表，学生有id,学号sid，性别sex,年龄age,电话号码telphone，学分score,创建时间created_at,更新时间updated_at这些字段，现在我们需要给他做一个增删改查的功能，同时还要提供接口给移动端或者其他客户端使用，看看我们怎么通过JsyangAdmin快速实现这个功能:")]),t._v(" "),a("h3",{attrs:{id:"新建一个符合以上需求的对象-建议在ide中用js文件编写，可以事先检查语法错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建一个符合以上需求的对象-建议在ide中用js文件编写，可以事先检查语法错误"}},[t._v("#")]),t._v(" 新建一个符合以上需求的对象(建议在ide中用js文件编写，可以事先检查语法错误):")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'INTEGER'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primaryKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" autoIncrement"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'学生ID'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  sid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'STRING(50)'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'学号'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  sex"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'INTEGER'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'性别'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'INTEGER'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'年龄'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  telphone"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'STRING(20)'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'电话号码'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  score"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'INTEGER'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'学分'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  created_at"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DATE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'创建时间'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  updated_at"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DATE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" comment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新时间'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("点击代码生成")]),t._v(" "),a("li",[t._v("输入菜单名：学生管理（提交后将在左边侧边栏显示)")]),t._v(" "),a("li",[t._v("输入报名: student (将会作为生成的代码的包的命名，包括后台接口名等等)")]),t._v(" "),a("li",[t._v("字段结构选择代码形式（图形化形式还在开发中⊙﹏⊙||| ）")]),t._v(" "),a("li",[t._v("将以上写好的对象复制进Model定义源代码的输入框中")]),t._v(" "),a("li",[t._v("点击提交")])]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"代码生成",href:"/add-structure.png"}},[a("img",{attrs:{src:"/add-structure.png",alt:"代码生成"}})]),t._v("\n如果看到提交成功的提示说明代码已经生成成功，这时候你会看到前台和后台的两个命令行窗口已经开始自动编译，运行了:\n"),a("a",{attrs:{"data-fancybox":"",title:"代码生成",href:"/student-success.png"}},[a("img",{attrs:{src:"/student-success.png",alt:"代码生成"}})]),t._v("\n这个时候先不要急着点击学生管理查看效果，会报错的，因为数据表还没生成呢，所以还需要一步(这里后续会考虑引入shell.js自动执行，再给大家省点心😁)")]),t._v(" "),a("h3",{attrs:{id:"生成数据表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成数据表"}},[t._v("#")]),t._v(" 生成数据表")]),t._v(" "),a("p",[t._v("上述生成的代码包含在jsyang-admin/database/migrations/students.js，所以我们可以在"),a("strong",[t._v("根目录")]),t._v("执行下面的命令生成student表：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("npx sequelize db:migrate\n\nSequelize CLI "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Node: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.16")]),t._v(".0, CLI: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.5")]),t._v(".1, ORM: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.44")]),t._v(".4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nLoaded configuration "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"database/config.json"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nUsing environment "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"development"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nsequelize deprecated String based operators are now deprecated. Please use Symbol based operators "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" better security, "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" at http://docs.sequelizejs.com/manual/tutorial/querying.html"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#operators node_modules/.4.44.4@sequelize/lib/sequelize.js:245:13")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" students: migrating "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" students: migrated "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(".264s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("可以看到studen种子文件已经被播种生成了students表了,去mysql看一下:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" use jsyang_admin\nReading table information "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" completion of table and "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n+------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Tables_in_jsyang_admin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" SequelizeMeta          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" admins                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" students               "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+------------------------+\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" rows "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.00")]),t._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("确定students表生成成功，现在我们可以放心地去点击前台的"),a("strong",[t._v("学生管理")]),t._v("菜单查看效果了：")]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502122246.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502122246.png",alt:""}})])]),t._v(" "),a("h3",{attrs:{id:"测试增删改查功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试增删改查功能"}},[t._v("#")]),t._v(" 测试增删改查功能")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("新增 & 查看\n"),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131306.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131306.png",alt:""}})]),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131411.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131411.png",alt:""}})])])]),t._v(" "),a("li",[a("p",[t._v("编辑")])])]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131549.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131549.png",alt:""}})])]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131717.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502131717.png",alt:""}})])]),t._v(" "),a("ul",[a("li",[t._v("删除\n"),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502132114.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502132114.png",alt:""}})]),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502132156.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502132156.png",alt:""}})]),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"",href:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502132244.png"}},[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/jsyang666/imgbed/20200502132244.png",alt:""}})])])]),t._v(" "),a("p",[t._v("到这里，我们的学生表的增删改查功能已经测试完毕（在测试过程中发现忘记添加姓名字段了，不过这个没关系，跟其他字符串字段是一个道理的）")]),t._v(" "),a("p",[t._v("这里还有一个问题就是性别那里为啥设置为1和2呢，那填3怎么办。这里其实只是为了给大家演示简单字段的设置，其实性别这种可选范围的字段可以用relate类型。\n除了relate类型，项目还支持其他高级类型，如头像字段可以设置img类型，新闻内容可以设置为richtext类型，同时图片、富文本上传功能都给你做好了，是不是很省心。高级类型具体使用可以查看"),a("a",{attrs:{href:"/advance"}},[t._v("进阶")])])])}),[],!1,null,null,null);s.default=e.exports}}]);